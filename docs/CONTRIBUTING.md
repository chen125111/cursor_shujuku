# 贡献指南（Contributing）

欢迎为本项目提交改进：无论是功能增强、缺陷修复、性能优化，还是文档与示例补全。

## 1. 开发约定

- **保持可读性优先**：新增代码请补齐函数级 docstring（说明用途、参数、返回值与异常）。
- **避免“隐式行为变更”**：如果改动会影响接口返回结构或状态码，请在描述中明确写出，并同步更新 `docs/API.md`。
- **兼容降级**：Redis / MySQL 等可选组件不可用时，应保持核心功能可运行（优雅降级）。

## 2. 分支与提交规范

- 建议以功能/问题为单位拆分提交（便于回溯与审查）
- 提交信息建议格式（示例）：
  - `docs: 完善 README 与开发文档`
  - `backend: 为数据校验模块补充 docstring`
  - `fix: 修复导入解析边界条件`

## 3. 代码风格与注释要求

- Python 代码遵循 PEP 8（不强制引入格式化工具，但请尽量保持一致）
- docstring 建议使用统一结构（中文即可）：

```text
说明：一句话说明函数做什么

Args:
    参数名: 含义、单位/取值范围（如适用）

Returns:
    返回值含义（以及结构/字段说明）

Raises:
    可能抛出的异常（如有）
```

> FastAPI 路由函数的 docstring 会直接展示在 `/docs`，建议写得更“面向调用者”一些。

## 4. 文档贡献指南

- 根目录 `README.md`：面向首次使用者的入口（安装、运行、主要链接）
- `docs/USER_GUIDE.md`：简明操作指南（步骤 + 示例查询）
- `docs/用户手册.md`：完整版手册（截图、详尽说明）
- `docs/API.md`：静态 API 文档（关键接口、鉴权、错误码、示例）
- `docs/DEVELOPMENT.md`：开发环境与调试说明

文档更新建议“先入口、后细节”：优先确保 `README.md` 的路径与链接正确，再补充长文档细节。

## 5. 自检清单（提交前）

- 能否正常启动后端并打开 `/docs`
- 新增/变更的接口是否：
  - 参数描述清晰、错误码合理
  - 返回结构与 `docs/API.md`（或用户手册）一致
- 关键路径脚本是否仍可运行：
  - `python init_db.py`
  - `python minimal_test.py`（以及相关 `test_*.py` 脚本）

